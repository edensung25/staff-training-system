{"ast":null,"code":"import _objectSpread from \"/Users/cai/Work_project/staff-training-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/cai/Work_project/staff-training-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/cai/Work_project/staff-training-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/cai/Work_project/staff-training-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/cai/Work_project/staff-training-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/cai/Work_project/staff-training-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/cai/Work_project/staff-training-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/cai/Work_project/staff-training-system/client/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport HomeLayout from './HomeLayout'; //'.js' can be omitted.\n\nimport QuestionSet from './QuestionSet';\nimport ChapterContent from './ChapterContent';\nimport ChapterList from './ChapterList';\nimport ManagerPage from './ManagerPage';\nimport { Button, notification, Form } from 'antd';\nimport Login from './Login';\nvar WrappedLogin = Form.create({\n  name: 'normal_login'\n})(Login);\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.onClickOfMenu = function (e) {\n      return _this.setState({\n        currentPage: e.key\n      });\n    };\n\n    _this.onClickOfHome = function () {\n      return _this.setState({\n        currentPage: 'chapterListPage'\n      });\n    };\n\n    _this.onSelectChapter = function (i, e) {\n      // logic of using bind()!\n      _this.setState({\n        currentPage: e.target.value,\n        chapterId: i\n      }); // just to demo the usage of e and bind().\n\n\n      console.log(_this.state.currentPage, _this.state.chapterId);\n    };\n\n    _this.onSelectTest = function (i) {\n      // logic of using bind()!\n      var questionSetIndex = _this.state.user.scores[i].findIndex(function (s, i, l) {\n        return l[i] === null;\n      }); // if tried all the tests, reset the scores:\n\n\n      if (questionSetIndex === -1) {\n        _this.openNotification(i);\n      } else {\n        _this.setState({\n          currentPage: 'testPage',\n          chapterId: i,\n          currentTest: questionSetIndex\n        });\n      }\n\n      console.log(_this.state.currentPage, _this.state.chapterId, questionSetIndex);\n    };\n\n    _this.openNotification = function (i) {\n      var bestScore = Math.max.apply(Math, _toConsumableArray(_this.state.user.scores[i]));\n      var key = \"open\".concat(Date.now());\n      var btn = React.createElement(Button, {\n        type: \"primary\",\n        size: \"small\",\n        onClick: function onClick() {\n          return notification.close(key);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Confirm\");\n      var msg = 'Chapter ' + (i + 1).toString() + bestScore >= 70 ? ' Passed!' : ' Failed!';\n      notification.open({\n        message: msg,\n        description: bestScore >= 70 ? 'You conquered this chapter, keep going to the next one.' : 'You have failed all the tests of this chapter, please contact system manager for help.',\n        btn: btn,\n        key: key,\n        duration: 0\n      });\n    };\n\n    _this.onBack = function (i, bm) {\n      var user = _this.state.user;\n      var updatedUser = user;\n      updatedUser.bookmarks[i] = bm;\n\n      _this.setState({\n        currentPage: 'chapterListPage',\n        user: updatedUser\n      });\n    };\n\n    _this.onQuit = function () {\n      console.log(_this.state.user.scores, _this.state.showScore);\n\n      _this.setState({\n        currentPage: 'chapterListPage'\n      });\n    };\n\n    _this.onScoreSubmit = function (c, t, s) {\n      var _this$state = _this.state,\n          user = _this$state.user,\n          showScore = _this$state.showScore;\n      var newScores = user.scores.map(function (arr) {\n        return arr.slice();\n      });\n      newScores[c][t] = s;\n\n      _this.setState({\n        user: _objectSpread({}, user, {\n          scores: newScores\n        })\n      });\n\n      console.log(user.scores, c, t, s, showScore);\n    };\n\n    _this.state = {\n      // chapterListPage, chapterContentPage, testPage, loginPage, managerPage\n      currentPage: 'loginPage',\n      showScore: false,\n      chapterId: 0,\n      currentTest: null,\n      user: {\n        admin: true,\n        username: 'abc',\n        password: '1234',\n        scores: [[null, null], [null, null]],\n        bookmarks: [2, 0] // 1 means page #1\n\n      },\n      chapters: [{\n        id: 0,\n        title: 'c1',\n        content: ['1111-1', '1111-2'],\n        questionSets: [[{\n          // [ [{},{},{}] , [{},{},{}]] ,\n          statement: 'ch1-qs1-1',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'C'\n        }, {\n          statement: 'ch1-qs1-2',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'D'\n        }, {\n          statement: 'ch1-qs1-3',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'D'\n        }], [{\n          statement: 'ch1-qs2-1',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'A'\n        }, {\n          statement: 'ch1-qs2-2',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'B'\n        }, {\n          statement: 'ch1-qs2-3',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'C'\n        }]]\n      }, {\n        id: 1,\n        title: 'c2',\n        content: ['2222-1', '2222-2'],\n        questionSets: [[{\n          // [ [{},{},{}] , [{},{},{}]] ,\n          statement: 'ch1-qs1-1',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'C'\n        }, {\n          statement: 'ch1-qs1-2',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'A'\n        }, {\n          statement: 'ch1-qs1-3',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'B'\n        }], [{\n          statement: 'ch1-qs2-1',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'A'\n        }, {\n          statement: 'ch1-qs2-2',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'D'\n        }, {\n          statement: 'ch1-qs2-3',\n          options: ['aa', 'bb', 'cc', 'dd'],\n          correctAnswer: 'C'\n        }]]\n      }]\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"renderChild\",\n    value: function renderChild() {\n      var _this$state2 = this.state,\n          user = _this$state2.user,\n          currentPage = _this$state2.currentPage,\n          chapterId = _this$state2.chapterId,\n          chapters = _this$state2.chapters,\n          currentTest = _this$state2.currentTest;\n\n      switch (currentPage) {\n        case 'loginPage':\n          {\n            return React.createElement(WrappedLogin, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 167\n              },\n              __self: this\n            });\n          }\n\n        case 'managerPage':\n          {\n            return React.createElement(ManagerPage, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 173\n              },\n              __self: this\n            });\n          }\n\n        case 'chapterListPage':\n          {\n            return React.createElement(ChapterList, {\n              chapters: chapters,\n              userScores: user.scores,\n              progresses: user.bookmarks,\n              onSelectTest: this.onSelectTest,\n              onSelectChapter: this.onSelectChapter,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 179\n              },\n              __self: this\n            });\n          }\n\n        case 'chapterContentPage':\n          {\n            console.log(this.state.user.scores);\n            return React.createElement(ChapterContent, {\n              chapterId: chapterId,\n              chapterTitle: chapters[chapterId].title,\n              bookmark: user.bookmarks[chapterId],\n              content: chapters[chapterId].content,\n              onBack: this.onBack,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 192\n              },\n              __self: this\n            });\n          }\n\n        case 'testPage':\n          {\n            var questionSet = chapters[chapterId].questionSets[currentTest];\n            return React.createElement(QuestionSet, {\n              chapterId: chapterId,\n              questionSetIndex: currentTest,\n              questions: questionSet,\n              onScoreSubmit: this.onScoreSubmit,\n              onQuit: this.onQuit,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 205\n              },\n              __self: this\n            });\n          }\n\n        default:\n          {\n            return null;\n          }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(HomeLayout, {\n        user: this.state.user,\n        onClickOfMenu: this.onClickOfMenu,\n        onClickOfHome: this.onClickOfHome,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, this.renderChild());\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/cai/Work_project/staff-training-system/client/src/App.js"],"names":["React","HomeLayout","QuestionSet","ChapterContent","ChapterList","ManagerPage","Button","notification","Form","Login","WrappedLogin","create","name","App","props","onClickOfMenu","e","setState","currentPage","key","onClickOfHome","onSelectChapter","i","target","value","chapterId","console","log","state","onSelectTest","questionSetIndex","user","scores","findIndex","s","l","openNotification","currentTest","bestScore","Math","max","Date","now","btn","close","msg","toString","open","message","description","duration","onBack","bm","updatedUser","bookmarks","onQuit","showScore","onScoreSubmit","c","t","newScores","map","arr","slice","admin","username","password","chapters","id","title","content","questionSets","statement","options","correctAnswer","questionSet","renderChild","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport HomeLayout from './HomeLayout'; //'.js' can be omitted.\nimport QuestionSet from './QuestionSet';\nimport ChapterContent from './ChapterContent';\nimport ChapterList from './ChapterList';\nimport ManagerPage from './ManagerPage';\nimport { Button, notification, Form } from 'antd';\nimport Login from './Login';\n\nconst WrappedLogin = Form.create({ name: 'normal_login' })(Login);\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // chapterListPage, chapterContentPage, testPage, loginPage, managerPage\n      currentPage: 'loginPage',\n      showScore: false,\n      chapterId: 0,\n      currentTest: null,\n      user: {\n        admin: true,\n        username: 'abc',\n        password: '1234',\n        scores: [[null, null], [null, null]],\n        bookmarks: [2, 0] // 1 means page #1\n      },\n      chapters: [\n        {\n          id: 0,\n          title: 'c1',\n          content: ['1111-1','1111-2'],\n          questionSets:[\n            [{ // [ [{},{},{}] , [{},{},{}]] ,\n              statement: 'ch1-qs1-1',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'C',\n            }, {\n              statement: 'ch1-qs1-2',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'D',\n            }, {\n              statement: 'ch1-qs1-3',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'D',\n            }],\n            [{\n              statement: 'ch1-qs2-1',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'A',\n            }, {\n              statement: 'ch1-qs2-2',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'B',\n            }, {\n              statement: 'ch1-qs2-3',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'C',\n            }]]},\n        {\n          id: 1,\n          title: 'c2',\n          content: ['2222-1','2222-2'],\n          questionSets:[\n            [{ // [ [{},{},{}] , [{},{},{}]] ,\n              statement: 'ch1-qs1-1',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'C',\n            }, {\n              statement: 'ch1-qs1-2',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'A',\n            }, {\n              statement: 'ch1-qs1-3',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'B',\n            }],\n            [{\n              statement: 'ch1-qs2-1',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'A',\n            }, {\n              statement: 'ch1-qs2-2',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'D',\n            }, {\n              statement: 'ch1-qs2-3',\n              options: ['aa', 'bb', 'cc', 'dd'],\n              correctAnswer: 'C',\n            }]]}\n      ],\n    }\n  }\n\n\n  onClickOfMenu = (e) => this.setState({currentPage: e.key});\n  // chapterListPage, chapterContentPage, testPage, loginPage, managerPage...\n\n  onClickOfHome = () => this.setState({currentPage: 'chapterListPage'})\n\n  onSelectChapter = (i, e) => { // logic of using bind()!\n    this.setState({currentPage: e.target.value, chapterId: i}); // just to demo the usage of e and bind().\n    console.log(this.state.currentPage, this.state.chapterId);\n  }\n\n  onSelectTest = (i) => { // logic of using bind()!\n    const questionSetIndex = this.state.user.scores[i].findIndex((s,i,l) => l[i]===null);\n    // if tried all the tests, reset the scores:\n    if (questionSetIndex === -1) {\n      this.openNotification(i);\n    }\n    else {\n      this.setState({currentPage: 'testPage', chapterId: i, currentTest: questionSetIndex});\n    }\n    console.log(this.state.currentPage, this.state.chapterId, questionSetIndex);\n  }\n\n  openNotification = (i) => {\n    const bestScore = Math.max(...this.state.user.scores[i]);\n    const key = `open${Date.now()}`;\n    const btn = (\n      <Button type='primary' size='small' onClick={() => notification.close(key)}>\n        Confirm\n      </Button>\n    );\n    const msg = 'Chapter ' + (i + 1).toString() + bestScore >= 70 ? ' Passed!' : ' Failed!';\n    notification.open({\n      message: msg,\n      description:\n        bestScore >= 70 ?\n          'You conquered this chapter, keep going to the next one.' :\n          'You have failed all the tests of this chapter, please contact system manager for help.',\n      btn,\n      key,\n      duration: 0,\n    });\n  };\n\n  onBack = (i, bm) => {\n    const {user} = this.state;\n    const updatedUser = user;\n    updatedUser.bookmarks[i] = bm;\n    this.setState({currentPage: 'chapterListPage', user: updatedUser})\n  };\n\n  onQuit = () => {\n    console.log(this.state.user.scores, this.state.showScore);\n    this.setState({currentPage: 'chapterListPage'});\n  }\n\n  onScoreSubmit = (c, t, s) => {\n    const {user, showScore} = this.state;\n    const newScores = user.scores.map(arr => arr.slice());\n    newScores[c][t] = s;\n    this.setState({user: {...user, scores: newScores}});\n    console.log(user.scores, c, t, s, showScore)\n  }\n\n  renderChild() {\n    const { user, currentPage, chapterId, chapters, currentTest } = this.state;\n\n    switch (currentPage) {\n      case 'loginPage': {\n        return (\n          <WrappedLogin />\n        );\n      }\n\n      case 'managerPage': {\n        return (\n          <ManagerPage />\n        );\n      }\n\n      case 'chapterListPage': {\n        return (\n          <ChapterList\n            chapters={chapters}\n            userScores={user.scores}\n            progresses={user.bookmarks}\n            onSelectTest={this.onSelectTest}\n            onSelectChapter={this.onSelectChapter}\n          />\n        );\n      }\n\n      case 'chapterContentPage': {\n        console.log(this.state.user.scores)\n        return (\n          <ChapterContent\n            chapterId={chapterId}\n            chapterTitle={chapters[chapterId].title}\n            bookmark={user.bookmarks[chapterId]}\n            content={chapters[chapterId].content}\n            onBack={this.onBack}\n          />\n        );\n      }\n\n      case 'testPage': {\n        const questionSet = chapters[chapterId].questionSets[currentTest];\n        return (\n          <QuestionSet\n            chapterId={chapterId}\n            questionSetIndex={currentTest}\n            questions={questionSet}\n            onScoreSubmit={this.onScoreSubmit}\n            onQuit={this.onQuit}/>\n        );\n      }\n\n      default: {\n        return null;\n      }\n    }\n  }\n\n  render() {\n    return (\n      <HomeLayout user={this.state.user} onClickOfMenu={this.onClickOfMenu} onClickOfHome={this.onClickOfHome}>\n        {this.renderChild()}\n      </HomeLayout>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}